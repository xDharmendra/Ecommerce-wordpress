{"version":3,"file":"admin-settings.js","mappings":"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","sources":["webpack://woo-stripe-payment/webpack/bootstrap","webpack://woo-stripe-payment/webpack/runtime/compat get default export","webpack://woo-stripe-payment/webpack/runtime/define property getters","webpack://woo-stripe-payment/webpack/runtime/hasOwnProperty shorthand","webpack://woo-stripe-payment/external window \"jQuery\"","webpack://woo-stripe-payment/./assets/js/admin/admin-settings.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"jQuery\"];","import $ from 'jquery';\n\nclass Settings {\n    constructor(params) {\n        this.params = params;\n        this.prefix = '#' + $('#wc_stripe_prefix').val();\n    }\n\n    init() {\n        $('[name^=\"woocommerce_stripe\"]').on('change', this.display_children.bind(this));\n\n        $('select.stripe-accepted-cards').on('select2:select', this.reorder_multiselect);\n\n        $('.api-register-domain').on('click', this.register_domain.bind(this));\n\n        $('.wc-stripe-create-webhook').on('click', this.manage_webhook.bind(this));\n\n        $('.wc-stripe-connection-test').on('click', this.do_connection_test.bind(this));\n\n        $('.stripe-delete-connection').on('click', this.do_delete_connection.bind(this));\n\n        $(document.body).on('change', '.payment-method-config-options', this.fetchPaymentMethodConfigSettings.bind(this));\n\n        $(document.body).on('click', '.add-new-payment-config', this.renderPaymentConfigModal.bind(this));\n\n        $(document.body).on('click', '#create-payment-config', this.createPaymentMethodConfig.bind(this));\n\n        $(document.body).on('click', '.refresh-payment-config', this.refreshPaymentConfig.bind(this));\n\n        if (typeof (wc_stripe_admin_notices) != 'undefined') {\n            this.display_notices();\n        }\n\n        this.display_children();\n\n        if (window.location.search.match(/_stripe_connect_nonce/)) {\n            history.pushState({}, '', window.location.pathname + '?page=wc-settings&tab=checkout&section=stripe_api');\n        }\n\n        $(document.body).on('submit', '#mainform', this.validateForm.bind(this));\n    }\n\n    display_children(e) {\n        $('[data-show-if]').each(function (i, el) {\n            var $this = $(el);\n            var values = $this.data('show-if');\n            var hidden = [];\n            $.each(values, function (k, v) {\n                var $key = $(this.prefix + k);\n                if (hidden.indexOf($this.attr('id')) == -1) {\n                    if ($key.is(':checkbox')) {\n                        if ($key.is(':checked') == v) {\n                            $this.closest('tr').show();\n                        } else {\n                            $this.closest('tr').hide();\n                            hidden.push($this.attr('id'));\n                        }\n                    } else {\n                        if ($key.val() == v) {\n                            $this.closest('tr').show();\n                        } else {\n                            $this.closest('tr').hide();\n                            hidden.push($this.attr('id'));\n                        }\n                    }\n                } else {\n                    $this.closest('tr').hide();\n                    hidden.push($this.attr('id'));\n                }\n            }.bind(this));\n        }.bind(this));\n    }\n\n    reorder_multiselect(e) {\n        var element = e.params.data.element;\n        var $element = $(element);\n        $element.detach();\n        $(this).append($element);\n        $(this).trigger('change');\n    }\n\n    register_domain(e) {\n        e.preventDefault();\n        this.block();\n        $.ajax({\n            url: this.params.routes.apple_domain,\n            dataType: 'json',\n            method: 'POST',\n            data: {_wpnonce: this.params.rest_nonce, hostname: window.location.hostname}\n        }).done((response) => {\n            this.unblock();\n            if (response.code) {\n                window.alert(response.message);\n            } else {\n                window.alert(response.message);\n            }\n        }).fail((xhr, textStatus, errorThrown) => {\n            this.unblock();\n            window.alert(errorThrown);\n        })\n    }\n\n    manage_webhook(e) {\n        e.preventDefault();\n        if ($(e.currentTarget).is('.wc-stripe-delete-webhook')) {\n            this.delete_webhook();\n        } else {\n            this.create_webhook();\n        }\n    }\n\n    create_webhook() {\n        this.block();\n        var env = $('#woocommerce_stripe_api_mode').val();\n        $.ajax({\n            url: this.params.routes.create_webhook,\n            dataType: 'json',\n            method: 'POST',\n            data: {_wpnonce: this.params.rest_nonce, environment: env}\n        }).done((response) => {\n            this.unblock();\n            if (response.code) {\n                window.alert(response.message);\n            } else {\n                $('#woocommerce_stripe_api_webhook_secret_' + env).val(response.secret);\n                window.alert(response.message);\n                window.location.reload();\n            }\n        }).fail((xhr, textStatus, errorThrown) => {\n            this.unblock();\n            window.alert(errorThrown);\n        })\n    }\n\n    delete_webhook() {\n        this.block();\n        var mode = $('#woocommerce_stripe_api_mode').val();\n        $.ajax({\n            url: this.params.routes.delete_webhook,\n            dataType: 'json',\n            method: 'POST',\n            data: {_wpnonce: this.params.rest_nonce, mode: mode}\n        }).done(function (response) {\n            this.unblock();\n            if (response.code) {\n                window.alert(response.message);\n            } else {\n                $('#woocommerce_stripe_api_webhook_secret_' + mode).val('');\n                window.location.reload();\n            }\n        }.bind(this)).fail(function (xhr, textStatus, errorThrown) {\n            this.unblock();\n            window.alert(errorThrown);\n        }.bind(this))\n    }\n\n    do_connection_test(e) {\n        e.preventDefault();\n        this.block();\n        var mode = $('#woocommerce_stripe_api_mode').val();\n        $.ajax({\n            url: this.params.routes.connection_test,\n            dataType: 'json',\n            method: 'POST',\n            data: (() => {\n                var data = {\n                    _wpnonce: this.params.rest_nonce,\n                    mode: mode\n                };\n                if (mode === 'test') {\n                    data.secret_key = $('#woocommerce_stripe_api_secret_key_test').val();\n                    data.publishable_key = $('#woocommerce_stripe_api_publishable_key_test').val();\n                }\n                return data;\n            })()\n        }).done(response => {\n            this.unblock();\n            if (response.code) {\n                window.alert(response.message);\n            } else {\n                window.alert(response.message);\n            }\n        }).fail((xhr, textStatus, errorThrown) => {\n            this.unblock();\n            window.alert(errorThrown);\n        })\n    }\n\n    display_notices() {\n        $.each(wc_stripe_admin_notices, function (idx, notice) {\n            $('.woo-nav-tab-wrapper').after(notice);\n        }.bind(this))\n    }\n\n    block() {\n        $('.wc-stripe-settings-container').block({\n            message: null,\n            overlayCSS: {\n                background: '#fff',\n                opacity: 0.6\n            }\n        });\n    }\n\n    unblock() {\n        $('.wc-stripe-settings-container').unblock();\n    }\n\n    do_delete_connection(e) {\n        e.preventDefault();\n        if (confirm(this.params.messages.delete_connection)) {\n            this.block();\n            $.ajax({\n                method: 'POST',\n                url: this.params.routes.delete_connection,\n                dataType: 'json',\n                data: {_wpnonce: this.params.rest_nonce}\n            }).done(function (response) {\n                this.unblock();\n                if (!response.code) {\n                    window.location.reload();\n                } else {\n                    window.alert(response.message);\n                }\n            }.bind(this)).fail(function () {\n                this.unblock();\n            }.bind(this));\n        }\n    }\n\n    createPaymentMethodConfig(e) {\n        e.preventDefault();\n        const $button = $(e.currentTarget);\n        const oldText = $button.text();\n        $button.text(this.params.messages.create).prop('disabled', true);\n        $.ajax({\n            method: 'POST',\n            url: this.params.routes.create_payment_method_config,\n            dataType: 'json',\n            data: {_wpnonce: this.params.rest_nonce, name: $('#payment_config_name').val()}\n        }).done(response => {\n            $button.text(oldText).prop('disabled', false);\n            if (!response.code) {\n                $('.wc-stripe-settings-container').replaceWith(response.html);\n                $(document.body).trigger('wc-enhanced-select-init');\n                $('.modal-close').click();\n            } else {\n                window.alert(response.message);\n            }\n        }).fail(() => {\n            $button.text(oldText).prop('disabled', false);\n        });\n    }\n\n    fetchPaymentMethodConfigSettings(e) {\n        this.block();\n        const enabled = $('#woocommerce_stripe_upm_enabled').is(':checked');\n        $.ajax({\n            method: 'POST',\n            url: this.params.routes.fetch_payment_method_config,\n            dataType: 'json',\n            data: {\n                _wpnonce: this.params.rest_nonce,\n                payment_config: $(e.currentTarget).val()\n            }\n        }).done(response => {\n            this.unblock();\n            if (!response.code) {\n                $('.wc-stripe-settings-container').replaceWith(response.html);\n                $('#woocommerce_stripe_upm_enabled').prop('checked', enabled);\n                $(document.body).trigger('wc-enhanced-select-init');\n                $('.modal-close').click();\n            } else {\n                window.alert(response.message);\n            }\n        }).fail(() => {\n            this.unblock();\n        });\n    }\n\n    renderPaymentConfigModal(e) {\n        e.preventDefault();\n        $(e.currentTarget).WCBackboneModal({\n            template: 'wc-stripe-modal-payment-config',\n            variable: ''\n        })\n    }\n\n    validateForm(e) {\n        if ($('.wc-stripe-settings-container').hasClass('stripe_upm')) {\n            if ($('.payment-method-config-options').val() === '') {\n                window.alert(this.params.messages.upm_validation);\n                return false;\n            }\n        }\n    }\n\n    refreshPaymentConfig(e) {\n        e.preventDefault();\n        const $button = $(e.currentTarget);\n        $button.prop('disabled', true).find('span').addClass('processing');\n        $.ajax({\n            method: 'POST',\n            url: this.params.routes.refresh_payment_method_config,\n            dataType: 'json',\n            data: {\n                _wpnonce: this.params.rest_nonce,\n                payment_config: $(e.currentTarget).val()\n            }\n        }).done(response => {\n            $button.prop('disabled', false).find('span').removeClass('processing');\n            if (!response.code) {\n                $('.wc-stripe-settings-container').replaceWith(response.html);\n                $(document.body).trigger('wc-enhanced-select-init');\n            } else {\n                window.alert(response.message);\n            }\n        }).fail(() => {\n            $button.prop('disabled', false).find('span').removeClass('processing');\n        });\n    }\n\n}\n\n$(() => {\n    (new Settings(wc_stripe_setting_params)).init();\n})"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","window","Settings","params","_classCallCheck","this","prefix","$","val","value","on","display_children","bind","reorder_multiselect","register_domain","manage_webhook","do_connection_test","do_delete_connection","document","body","fetchPaymentMethodConfigSettings","renderPaymentConfigModal","createPaymentMethodConfig","refreshPaymentConfig","wc_stripe_admin_notices","display_notices","location","search","match","history","pushState","pathname","validateForm","e","each","i","el","$this","values","data","hidden","k","v","$key","indexOf","attr","is","closest","show","hide","push","element","$element","detach","append","trigger","_this","preventDefault","block","url","routes","apple_domain","dataType","method","_wpnonce","rest_nonce","hostname","done","response","unblock","code","alert","message","fail","xhr","textStatus","errorThrown","currentTarget","delete_webhook","create_webhook","_this2","env","environment","secret","reload","mode","_this3","connection_test","secret_key","publishable_key","idx","notice","after","overlayCSS","background","opacity","confirm","messages","delete_connection","$button","oldText","text","create","create_payment_method_config","name","replaceWith","html","click","_this4","enabled","fetch_payment_method_config","payment_config","WCBackboneModal","template","variable","hasClass","upm_validation","find","addClass","refresh_payment_method_config","removeClass","wc_stripe_setting_params","init"],"sourceRoot":""}